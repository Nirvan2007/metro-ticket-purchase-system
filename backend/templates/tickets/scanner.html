{% extends 'tickets/base.html' %}
{% block content %}
<main class="page">
<div class="full-card">
<h2>Ticket Scanner</h2>
<p>Enter ticket id to mark enter/exit.</p>
<input id='ticket_id' placeholder='Ticket id' />
<button class="view-btn" onclick='enter()'>Enter</button>
<button class="view-btn" onclick='exit()'>Exit</button>
<div id='result'></div>
<script>
function api(action){
  const id = document.getElementById('ticket_id').value;
  fetch('/api/scan/'+id+'/?action='+action).then(r=>r.json()).then(j=>{
    document.getElementById('result').innerText = JSON.stringify(j);
  }).catch(e=>alert('Error: '+e));
}
function enter(){ api('enter'); }
function exit(){ api('exit'); }
</script>
</div></main> 
{% endblock %}
